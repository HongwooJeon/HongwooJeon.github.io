---
title: 클래스 다이어그램
author: Banjung
date: 2022-06-01 10:00:00 +0800
categories: [소프트웨어 공학, 클래스 다이어그램]
tags: [소프트웨어 공학]
math: true
mermaid: true
---

## 클래스 다이어그램
- 시간에 따라 변하지 않는 시스템의 정적인 면을 보여주는 대표적인 UML 구조 다이어그램이다.
- `목적`
  - 시스템을 구성하는 클래스들 사이의 관계를 표현한다.

## 클래스란?
- 동일한 속성과 행위를 수행하는 객체의 집합
- 객체를 생성하는 설계도
  - 즉, 클래스는 공통의 속성과 책임을 갖는 객체들의 집합이자 실제 객체를 생성하는 설계도이다.
- 클래스는 `변화의 기본 단위`이다.
  - 디자인 패턴을 제대로 이해하려면 만들어진 프로그램을 흔들어보고 어떤 것이 변화되는지를 잘 살펴봐야 한다.

## UML 클래스 표현
- 상단: 클래스의 이름
- 중간: 속성(클래스의 특징)
- 하단: 연산(클래스가 수행하는 책임)

![image](/assets/img/UML/ClassDiagram1.jpg)

- `경우에 따라 속성과 연산 부분은 생략할 수 있다.`
- 속성과 연산의 가시화를 정의한다.

|접근 제어자|표시|설명|
|-----------|-------------|------------|
|public|+|어떤 클래스의 객체에서든 접근이 가능하다.|
|private|-|해당 클래스의 객체내에서만 접근이 가능하다.|
|protected|#|해당 클래스와 동일 패키지 or 상속 관계에 있는 하위 클래스만 접근가능하다.|
|pakage|~|동일 패키지에 있는 클래스의 객체만 접근이 가능하다.|

- 분석 단계와 설계 단계에서의 클래스 다이어그램

![image](/assets/img/UML/ClassDiagram2.jpg)

## 관계
- UML에서 제공하는 클래스들 사이의 관계

|관계|표시|설명|
|----------|-----------|----------|
|연관 관계|실선 OR 화살표|클래스들이 개념상 서로 연결되었음을 나타낸다. 보통 한 클래스가 다른 클래스에서 제공하는 기능을 사용하는 상황일 때 표시한다.|
|일반화 관계|속이 빈 화살표|객체지향 개념에서는 상속 관계라고 한다.|
|집약 관계|속이 빈 다이아몬드|클래스들 사이의 전체 또는 부분 같은 관계를 나타낸다. 전체 객체의 라이프타임과 부분 객체의 라이프 타임은 독립적이다.|
|합성 관계|속이 찬 다이아몬드|클래스들 사이의 전체 또는 부분 같은 관계를 나타낸다. 전체 객체의 라이프타임과 부분 객체의 라이프 타임은 의존적이다.|
|의존 관계|점선 화살표|연관 관계와 같이 한 클래스가 다른 클래스에서 제공하는 기능을 사용할 때를 나타낸다. 차이점은 두 클래스의 관계가 한 메서드를 실행하는 동안과 같은, 매우 짧은 시간만 유지된다.|
|실체화 관계|빈 삼각형과 점선|책임들의 집합인 인터페이스와 이 책임들을 실제로 실현한 클래스들 사이의 관계를 나타낸다.|

### 연관 관계
- 한 클래스가 다른 클래스와 연관 관계를 가지면 각 클래스의 객체는 해당 연관 관계에서 어떤 `역할`을 수행한다.
  - 두 클래스 사이의 연관 관계가 명확한 경우에는 연관 관계 이름을 사용하지 않아도 된다.
  - 역할 이름은 실제 프로그램을 구현할 때 연관된 클래스의 객체들이 서로를 참조할 수 있는 속성의 이름으로 활용할 수 있다.
  - 연관 관계는 방향성을 가질 수 있다. 양방향은 실선으로, 단방향은 화살표로 표시한다.
- 화살표
  - 단방향 연관 관계
  - 한 쪽은 알지만 다른 쪽을 상대방의 존재를 모른다.

  - ![image](/assets/img/UML/ClassDiagram3.jpg)

  - 실선
    - 양방향 연관 관계
    - 두 클래스의 객체들이 서로의 존재를 인식한다.

  - ![image](/assets/img/UML/ClassDiagram4.jpg)

  - 일반적으로 `다대다` 연관 관계는 양방향 연관 관계로 표현하는 것이 적절하다.
  - 하지만 양방향 연관 관계를 구현하는 것은 복잡하기 때문에 보통 다대다 연관 관계를 `일대다 단방향 연관 관계`로 변환해 구현한다.

- 연관 클래스
  - 연관 관계에 추가할 속성이나 행위가 있을 때 사용한다.
  - 연관 클래스는 연관 관계가 있는 두 클래스 사이에 위치하며, 점선을 사용해 연결한다.
  - 이 연관 클래스를 일반 클래스로 변환하여 `다대다에서 일대다` 연관 관계로 변환한다.

  - ![image](/assets/img/UML/ClassDiagram5.jpg)

  - 다중성 표시방법

    |다중성 표기|의미|
    |-------|----------|
    |1|엄밀하게 1|
    |* or 0..*|0 or 그 이상|
    |1..*|1 or 그 이상|
    |0..1|0 or 1|
    |1,2,5|1 or 2 or 5|

  - 선에 아무런 숫자가 없으면 1:1 관계이다.

### 일반화 관계
- 한 클래스가 다른 클래스를 포함하는 상위 개념일 때 두 클래스 사이에는 일반화 관계가 존재한다.
  - 객체지향 개념에서는 일반화 관계를 `상속 관계`라고 한다.

  - ![image](/assets/img/UML/ClassDiagram6.jpg)

  - 부모 클래스(가전제품)
    - 추상적인 개념(실제로 존재하지 않는다.)
    - 삼각형 표시가 있는 쪽이다.
  - 자식 클래스
    - 구체적인 개념
    - 삼각형 표시가 없는 쪽
  - 부모 클래스는 자식 클래스의 `공통 속성이나 연산을 제공하는 틀`이다.
  - 예를 들어 가전 제품 클래스에 제조번호, 제조년도, 제조회사와 같은 공통 속성과 켜기, 끄기와 같은 공통 연산을 두고 이를 상속받아 세탁기, TV, 식기 세척기와 같은 자식 클래스에서 사용하면 된다.
  - 추상 클래스
    - 추상 메서드를 하나 이상 가지는 클래스
    - 추상 메서드
      - 부모 클래스에서 구현되지 않은 빈 껍데기만 있는 연산
      - 예를 들어, 위의 켜기, 끄기는 자식 클래스마다 다르기 때문에 부모 클래스인 가전 제품에서 해당 연산에 대한 정의를 하지 않고 빈 껍데기만 있는 연산을 제공한다.
      - 추상 클래스는 다른 일반적인 클래스와는 달리 `객체를 생성할 수 없다.`
      - UML에서는 추상 클래스와 추상 메서드를 표현한다.

      - ![image](/assets/img/UML/ClassDiagram7.jpg)

### 집합 관계
- UML 연관 관계의 특별 경우로 `전체와 부분의 관계`를 명확하게 명시하고자할 때 사용한다.

![image](/assets/img/UML/ClassDiagram8.jpg)

#### **집약 관계(aggregation)**
- 한 객체가 다른 객체를 포함하는 것(`부분`을 나타내는 객체를 다른 객체와 공유할 수 있다.)
- `전체`를 가리키는 클래스 방향에 빈 마름모로 표시한다.
- 전체 객체의 라이프타임과 부분 객체의 라이프 타임은 `독립적`이다.

- 예> 생성자에서 참조값을 인자로 받아 필드를 세팅한다.

```java
public class Computer
{
    private MainBoard mb;
    private CPU c;

    public Computer(MainBoard mb, CPU c)
    {
        this.mb = mb;
        this.c = c;
    }
}
```


#### **합성 관계(composition)**
- 부분 객체가 전체 객체에 속하는 관계
- `전체`를 가리키는 클래스 방향에 채워진 마름모로 표시한다.
- 전체 객체의 라이프타임과 부분 객체의 라이프 타임은 `의존적`이다.
- 예> 생성자에서 필드에 대한 객체를 생성한다.
```java
public class Computer
{
    private MainBoard mb;
    private CPU c;

    public Computer()
    {
        this.mb = new MainBoard();
        this.c = new CPU();
    }
}
```

### 의존 관계
- 일반적으로 한 클래스가 다른 클래스를 사용하는 경우
  - 클래스의 속성(`멤버 변수`)에서 참조할 때
  - 연산의 `인자(참조 값)`로 사용 될 때
  - Method 내부의 지역 객체로 참조 될 때

- 연관 관계와 의존 관계의 차이
![image](/assets/img/UML/ClassDiagram9.jpg)

- 연관 관계
  - 오랜 시간 동안 같이할 객체와의 관계
  - 예> 자동차와 소유한 사람의 관계

```java
public Person
{
    private Car owns;
    public void setCar(Car car)
    {
        this.owns = car;
    }

    public Car getCar()
    {
        return this.owns;
    }
}

```

- 의존 관계
  - 짧은 시간 동안 이용하는 관계
  - UML에서 점선으로 나타낸다.
  - 예> 자동차와 주유기의 관계

```java
public class Car
{
    public void fillGas(GasPump p)
    {
        p.GetGas(amount);
    }
}
```  

### 인터페이스와 실체화 관계
- 인터페이스란 `책임`이다.
- 어떤 객체의 책임이란 객체가 해야 하는 일 or 객체가 할 수 있는 일이다.
- 즉, 객체가 외부에 제공하는 서비스나 기능은 객체가 수행하는 책임으로 본다.
- 어떤 공통되는 능력이 있는 것들을 대표하는 관점이다.
- UML에서 Interface의 표현방법
  - Interface: 클래스에 사용하는 사각형을 그대로 사용하고 인터페이스 이름 위에 스테레오 타입이로 interface를 표시한다.
  - 빈 삼각형과 점선을 사용한다.

![image](/assets/img/UML/ClassDiagram10.jpg)